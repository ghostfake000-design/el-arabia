
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù†Ø¸Ø§Ù… - Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .card {
            background: #0f172a;
            padding: 40px;
            border-radius: 35px;
            border: 1px solid #1e293b;
            width: 420px;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
            transition: 0.3s;
        }
        .logo { color: #eab308; font-size: 50px; margin-bottom: 15px; }
        h1 { font-size: 24px; font-weight: 900; margin-bottom: 5px; color: white; }
        .subtitle { color: #64748b; font-size: 12px; margin-bottom: 25px; }
        
        .device-id-box {
            background: #020617;
            padding: 15px;
            border-radius: 20px;
            border: 2px dashed #334155;
            margin-bottom: 20px;
        }
        .device-id-label { font-size: 9px; color: #475569; font-weight: 900; margin-bottom: 5px; letter-spacing: 1px; }
        .device-id-value { font-family: 'Courier New', monospace; color: #fbbf24; font-weight: bold; font-size: 20px; }

        .info-box { 
            padding: 12px; 
            border-radius: 15px; 
            margin-bottom: 15px; 
            font-size: 11px; 
            font-weight: 900;
            line-height: 1.6;
        }
        .info-trial { background: #1e3a5f; border: 1px solid #0ea5e9; color: #0ea5e9; }
        .info-expired { background: #7f1d1d; border: 1px solid #ef4444; color: #fca5a5; }

        .input-group { margin-bottom: 15px; text-align: right; }
        label { display: block; font-size: 11px; font-weight: 900; color: #94a3b8; margin-right: 10px; margin-bottom: 5px; }
        
        input {
            width: 100%;
            background: #020617;
            border: 1px solid #334155;
            padding: 18px;
            border-radius: 18px;
            color: white;
            text-align: center;
            font-weight: 900;
            font-size: 18px;
            outline: none;
            box-sizing: border-box;
            transition: 0.3s;
        }
        input:focus { border-color: #eab308; box-shadow: 0 0 15px rgba(234, 179, 8, 0.2); }
        
        #trialDaysGroup { 
            display: none; 
            animation: slideDown 0.4s ease forwards;
            background: #1e293b;
            padding: 15px;
            border-radius: 20px;
            margin-top: 10px;
        }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        button {
            width: 100%;
            background: #eab308;
            color: black;
            border: none;
            padding: 18px;
            border-radius: 18px;
            font-weight: 900;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
            box-shadow: 0 10px 20px -5px rgba(234, 179, 8, 0.3);
        }
        button:hover { background: #facc15; transform: translateY(-2px); }
        button:active { transform: translateY(0); }

        .error { color: #f87171; font-size: 12px; margin-top: 15px; font-weight: 900; display: none; }
    </style>
</head>
<body>
    <div class="card">
        <div class="logo">ğŸ”</div>
        <h1>ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù†Ø¸Ø§Ù…</h1>
        <div class="subtitle">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø²Ù† - Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„ØµÙ‡Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù†</div>
        
        <div class="device-id-box">
            <div class="device-id-label">Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² (Case Sensitive)</div>
            <div class="device-id-value" id="deviceId">...</div>
        </div>

        <div class="input-group">
            <label>ÙƒÙˆØ¯ Ø§Ù„ØªÙ†Ø´ÙŠØ·</label>
            <input type="password" id="licenseKey" placeholder="XXXXXX" oninput="checkKeyType()">
        </div>

        <div id="trialDaysGroup" class="input-group">
            <label>Ø­Ø¯Ø¯ Ù…Ø¯Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø¨Ø§Ù„Ø£ÙŠØ§Ù…)</label>
            <input type="number" id="trialDays" placeholder="Ù…Ø«Ø§Ù„: 10" min="1" max="365">
        </div>

        <button onclick="handleActivation()">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¢Ù†</button>
        <div id="error" class="error">ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©</div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');

        ipcRenderer.on('setup-ui', (event, data) => {
            document.getElementById('deviceId').innerText = data.deviceId;
            
            const card = document.querySelector('.card');
            const h1 = document.querySelector('h1');
            const devBox = document.querySelector('.device-id-box');
            
            // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ±Ø®ÙŠØµ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ù† ÙˆØ¬Ø¯
            if (data.type === 'TRIAL' && data.daysLeft) {
                const infoDiv = document.createElement('div');
                infoDiv.className = 'info-box info-trial';
                infoDiv.innerHTML = `â±ï¸ <strong>ÙØªØ±Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù†Ø´Ø·Ø©</strong><br>
                    Ø£ÙŠØ§Ù… Ù…ØªØ¨Ù‚ÙŠØ©: <strong>${data.daysLeft}</strong><br>
                    ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: <strong>${data.expiryDate}</strong><br>
                    ${data.daysLeft <= 3 ? '<br>âš ï¸ Ø§Ù„ÙØªØ±Ø© Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡!' : ''}`;
                card.insertBefore(infoDiv, devBox.nextSibling);
            }
            
            if (data.expired) {
                h1.innerText = 'âŒ Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªØ±Ø®ÙŠØµ';
                h1.style.color = '#ef4444';
                
                const expiredDiv = document.createElement('div');
                expiredDiv.className = 'info-box info-expired';
                expiredDiv.innerHTML = `âš ï¸ <strong>Ø§Ù†ØªÙ‡Øª Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©</strong><br>
                    ${data.expiredMessage || 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØªØ±Ø®ÙŠØµ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.'}<br>
                    <br>ÙŠÙ…ÙƒÙ†Ùƒ:<br>
                    â€¢ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² ØªØ±Ø®ÙŠØµ Ù†Ù‡Ø§Ø¦ÙŠ (${data.deviceId}FF)<br>
                    â€¢ Ø£Ùˆ ØªØ¬Ø±ÙŠØ¨ ÙØªØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© (${data.deviceId}F)`;
                card.insertBefore(expiredDiv, devBox.nextSibling);
                
                const btn = document.querySelector('button');
                btn.innerText = 'ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ±Ø®ÙŠØµ';
                btn.style.background = '#ef4444';
            }
        });

        function checkKeyType() {
            const key = document.getElementById('licenseKey').value.trim();
            const trialDaysGroup = document.getElementById('trialDaysGroup');
            
            // Ø·Ù„Ø¨ ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù€ Main process
            ipcRenderer.send('check-key-type', key);
        }

        ipcRenderer.on('key-type-result', (event, type) => {
            const trialDaysGroup = document.getElementById('trialDaysGroup');
            if (type === 'TRIAL') {
                trialDaysGroup.style.display = 'block';
            } else {
                trialDaysGroup.style.display = 'none';
            }
        });

        function handleActivation() {
            const key = document.getElementById('licenseKey').value.trim();
            const days = document.getElementById('trialDays').value;
            
            ipcRenderer.send('submit-activation', { key, days });
        }

        ipcRenderer.on('activation-error', (event, msg) => {
            const err = document.getElementById('error');
            err.innerText = msg || 'ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©';
            err.style.display = 'block';
        });
    </script>
</body>
</html>
